# Firestore Initial Data Seeding Guide

After the application has been updated to use Firestore as its data source, you'll need to populate your Firestore database with the initial mock data. This guide provides the data structure. You can add this data manually via the Firebase Console or use a script with the Firebase Admin SDK or client SDK.

**Important:**
- Replace string dates with Firestore `Timestamp` objects. In the Firebase console, you can use the date picker. If scripting, use `admin.firestore.Timestamp.fromDate(new Date("YYYY-MM-DDTHH:mm:ssZ"))` or `firebase.firestore.Timestamp.fromDate(...)`.
- For `addressSubmissions`, `submittedAt` and `reviewedAt` (if present) should be Timestamps.
- For `apiKeys`, `createdAt` and `lastUsedAt` (if present) should be Timestamps.
- Document IDs can be auto-generated by Firestore, or you can use the string IDs provided in the `apiKeys` mock data if you prefer to keep them. For `addressSubmissions`, auto-generated IDs are typical for new entries.

## 1. `addressSubmissions` Collection

Create a collection named `addressSubmissions`. Add documents with the following structure.

**Example Document 1 (Approved):**
```json
{
  "userId": "abdulhaqq_cto_id",
  "userName": "Abdulhaqq Sule",
  "userEmail": "webmanager@haqqman.com",
  "submittedAddress": {
    "streetAddress": "1 Tech Avenue, Victoria Island",
    "areaDistrict": "Innovation Hub",
    "city": "Lagos",
    "lga": "Eti-Osa",
    "state": "Lagos",
    "country": "Nigeria",
    "zipCode": "101241"
  },
  "googleMapsSuggestion": "1 Tech Avenue, Victoria Island, Lagos 101241, Nigeria",
  "status": "approved",
  "aiFlaggedReason": null,
  "submittedAt": "Timestamp(seconds=1715322000, nanoseconds=0)", // Firestore Timestamp for new Date(2024, 4, 10, 10, 0, 0)
  "reviewedAt": "Timestamp(seconds=1715325600, nanoseconds=0)", // Firestore Timestamp for new Date(2024, 4, 10, 11, 0, 0)
  "reviewerId": "mockAdminId"
}
```

**Example Document 2 (Pending Review):**
```json
{
  "userId": "joshua_manager_id",
  "userName": "Joshua Ajorgbor",
  "userEmail": "joshua+sandbox@haqqman.com",
  "submittedAddress": {
    "streetAddress": "25 Market Road, GRA Phase 2",
    "areaDistrict": "Commerce District",
    "city": "Port Harcourt",
    "lga": "Port Harcourt City",
    "state": "Rivers",
    "country": "Nigeria",
    "zipCode": "500272"
  },
  "googleMapsSuggestion": "25 Market Rd, GRA Phase 2, Port Harcourt 500272, Rivers, Nigeria",
  "status": "pending_review",
  "aiFlaggedReason": "Street name variation compared to Google Maps.",
  "submittedAt": "Timestamp(seconds=1717241400, nanoseconds=0)", // Firestore Timestamp for new Date(2024, 5, 1, 14, 30, 0)
  "reviewedAt": null,
  "reviewerId": null
}
```

**Example Document 3 (Pending Review - Discrepancy Test):**
```json
{
  "userId": "another_user_id",
  "userName": "Regular User",
  "userEmail": "user@example.com",
  "submittedAddress": {
    "streetAddress": "15 Main Street, Test Discrepancy Layout",
    "areaDistrict": "Residential Area",
    "city": "Abuja",
    "lga": "AMAC",
    "state": "FCT",
    "country": "Nigeria",
    "zipCode": "900001"
  },
  "googleMapsSuggestion": "15 Main St, Residential Area, Abuja 900001, Nigeria",
  "status": "pending_review",
  "aiFlaggedReason": "The user provided 'Test Discrepancy Layout' which is not found in Google Maps for this street.",
  "submittedAt": "Timestamp(seconds=1718424900, nanoseconds=0)", // Firestore Timestamp for new Date(2024, 5, 15, 9, 15, 0)
  "reviewedAt": null,
  "reviewerId": null
}
```

## 2. `apiKeys` Collection

Create a collection named `apiKeys`. Add documents with the following structure. You can use the `id` field below as the Firestore Document ID.

**Example Document 1 (ID: `key_1`):**
```json
{
  "userId": "user_A",
  "userName": "Alice Wonderland",
  "userEmail": "alice@example.com",
  "publicKey": "pk_live_alicekeypublic123",
  "privateKeyHash": "hashed_private_key", // In a real scenario, store a hash
  "createdAt": "Timestamp(seconds=1700000000, nanoseconds=0)", // Firestore Timestamp for new Date(2023, 10, 1)
  "lastUsedAt": "Timestamp(seconds=1705276800, nanoseconds=0)", // Firestore Timestamp for new Date(2024, 0, 15)
  "isActive": true,
  "name": "Alice's Main Key"
}
```

**Example Document 2 (ID: `key_2`):**
```json
{
  "userId": "user_B",
  "userName": "Bob The Builder",
  "userEmail": "bob@example.com",
  "publicKey": "pk_live_bobkeypublic456",
  "privateKeyHash": "hashed_private_key_2",
  "createdAt": "Timestamp(seconds=1701734400, nanoseconds=0)", // Firestore Timestamp for new Date(2023, 11, 5)
  "lastUsedAt": null, // Or omit if never used
  "isActive": false,
  "name": "Bob's Old Key"
}
```

**Example Document 3 (ID: `key_3`):**
```json
{
  "userId": "user_C",
  "userName": "Charlie Brown",
  "userEmail": "charlie@example.com",
  "publicKey": "pk_live_charliekey789",
  "privateKeyHash": "hashed_private_key_3",
  "createdAt": "Timestamp(seconds=1705708800, nanoseconds=0)", // Firestore Timestamp for new Date(2024, 0, 20)
  "lastUsedAt": null,
  "isActive": true,
  "name": "Charlie's App Key"
}
```

### Notes on Timestamps:
The `Timestamp(seconds=..., nanoseconds=0)` format is a representation. When using the Firebase Console, you can select dates. When scripting:
- **Client-side (JS/TS):** `import { Timestamp } from "firebase/firestore"; Timestamp.fromDate(new Date("2023-11-01T00:00:00Z"));`
- **Admin SDK (Node.js):** `admin.firestore.Timestamp.fromDate(new Date("2023-11-01T00:00:00Z"));`

Adjust the actual timestamp values to match the intended dates precisely. The seconds provided above are approximations.
For `submittedAt` in `addressSubmissions` and `createdAt` in `apiKeys` when creating new documents through the app, `serverTimestamp()` will be used by the code, so Firestore will automatically set the correct time. For this initial seed, you set them manually.
If `lastUsedAt` is not applicable (e.g., key never used), you can set it to `null` or omit the field.
